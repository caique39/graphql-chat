(this["webpackJsonpchat-app"]=this["webpackJsonpchat-app"]||[]).push([[0],{41:function(n,e,t){n.exports=t(62)},46:function(n,e,t){},62:function(n,e,t){"use strict";t.r(e);var r=t(1),a=t.n(r),c=t(31),o=t.n(c),u=(t(46),t(15)),i=t(6),s=t(8);function l(){var n=Object(i.a)(["\n  padding: 4px 6px;\n  background-color: #fff;\n  border-radius: 8px;\n  margin: 4px 0;\n"]);return l=function(){return n},n}function f(){var n=Object(i.a)(["\n  display: flex;\n  justify-content: flex-start;\n"]);return f=function(){return n},n}function d(){var n=Object(i.a)(["\n  font-size: 12px;\n  color: red;\n"]);return d=function(){return n},n}function p(){var n=Object(i.a)(["\n  margin: 0;\n  font-size: 14px;\n  color: #212121;\n"]);return p=function(){return n},n}var b=s.a.p(p()),v=s.a.span(d()),g=s.a.div(f()),m=s.a.div(l());function j(n){var e=n.text,t=n.sender,r=n.ownMessage;return a.a.createElement(g,{style:r?{justifyContent:"flex-end"}:{}},a.a.createElement(m,null,a.a.createElement(v,null,t),a.a.createElement(b,null,e)))}function x(){var n=Object(i.a)(["\n  background-image: url(https://wallpapercave.com/wp/wp3998720.jpg);\n  background-size: 100%;\n  flex: 1;\n  overflow-y: scroll;\n  padding: 8px 12px;\n"]);return x=function(){return n},n}var O=s.a.div(x());function h(n){var e=n.messages,t=n.username,c=Object(r.useRef)(null);return Object(r.useEffect)((function(){c.current.scrollIntoView({behavior:"smooth"})}),[e]),a.a.createElement(O,null,e.map((function(n,e){var r=n.text,c=n.sender;return a.a.createElement(j,{key:e,text:r,sender:c,ownMessage:c===t})})),a.a.createElement("div",{ref:c}))}function E(){var n=Object(i.a)(["\n  font-size: 14px;\n  color: #757575;\n"]);return E=function(){return n},n}function w(){var n=Object(i.a)(["\n  font-size: 16px;\n  color: #212121;\n  margin: 0;\n"]);return w=function(){return n},n}function k(){var n=Object(i.a)(["\n  height: 35px;\n  width: 35px;\n  border-radius: 100px;\n  margin-right: 16px;\n"]);return k=function(){return n},n}function y(){var n=Object(i.a)(["\n  background-color: #fff;\n  padding: 12px 16px;\n  display: flex;\n  align-items: center;\n"]);return y=function(){return n},n}var S=s.a.nav(y()),M=s.a.img(k()),z=s.a.h3(w()),$=s.a.span(E());function q(n){var e=n.username,t=n.phone,r=n.avatar;return a.a.createElement(S,null,a.a.createElement(M,{src:r}),a.a.createElement("div",null,a.a.createElement(z,null,e),a.a.createElement($,null,t)))}var I=t(14),J=t(38),R=t(18),U={get:function(){return JSON.parse(localStorage.getItem("USER"))},save:function(n){localStorage.setItem("USER",JSON.stringify(n))}};function B(){var n=Object(i.a)(["\n  subscription {\n    newMessage {\n      date\n      sender\n      text\n    }\n  }\n"]);return B=function(){return n},n}function C(){var n=Object(i.a)(["\n  query {\n    messages {\n      date\n      sender\n      text\n    }\n  }\n"]);return C=function(){return n},n}function D(){var n=Object(i.a)(["\n  mutation {\n    createUser {\n      name\n      id\n      avatar\n      phone\n    }\n  }\n"]);return D=function(){return n},n}var N=Object(R.a)(D()),W=Object(R.a)(C()),H=Object(R.a)(B());var L=t(19),V=t.n(L);function A(){var n=Object(i.a)(["\n  mutation sendMessage($sender: String!, $text: String!) {\n    sendMessage(sender: $sender, text: $text) {\n      date\n      sender\n      text\n    }\n  }\n"]);return A=function(){return n},n}function F(){var n=Object(i.a)(["\n  padding: 12px;\n  background-color: #eee;\n  border: none;\n  color: #212121;\n  font-weight: bold;\n  border-radius: 4px;\n  margin-left: 8px;\n"]);return F=function(){return n},n}function G(){var n=Object(i.a)(["\n  flex: 1;\n  font-size: 16px;\n  outline: none;\n  background-color: #eee;\n  border-radius: 8px;\n  border: none;\n  padding-left: 12px;\n"]);return G=function(){return n},n}function K(){var n=Object(i.a)(["\n  display: flex;\n  padding: 8px 16px;\n"]);return K=function(){return n},n}function P(){var n=Object(i.a)(["\n  height: ","px;\n  display: flex;\n  flex-direction: column;\n"]);return P=function(){return n},n}var Q=s.a.div(P(),window.innerHeight),T=s.a.form(K()),X=s.a.input(G()),Y=s.a.button(F()),Z=V()(A());function _(n){var e=n.user,t=e.name,c=e.avatar,o=e.phone,i=Object(I.a)(Z),s=Object(u.a)(i,1)[0],l=Object(r.useState)(""),f=Object(u.a)(l,2),d=f[0],p=f[1],b=function(){var n=Object(r.useState)([]),e=Object(u.a)(n,2),t=e[0],a=e[1],c=Object(I.b)(W),o=c.data,i=c.loading,s=c.error,l=(o||{}).messages;Object(r.useEffect)((function(){l&&a(l)}),[l]);var f=(Object(I.c)(H).data||{}).newMessage;return Object(r.useEffect)((function(){f&&a((function(n){return[].concat(Object(J.a)(n),[f])}))}),[f]),{messages:t,loading:i,error:s}}().messages,v=Object(r.useRef)(null),g=function(){return v.current.focus()};return a.a.createElement(Q,null,a.a.createElement(q,{username:t,phone:o,avatar:c}),a.a.createElement(h,{messages:b,username:t}),a.a.createElement(T,{onSubmit:function(n){var e;n.preventDefault(),e=d,g(),s({variables:{sender:t,text:e}}),p("")}},a.a.createElement(X,{value:d,onChange:function(n){return p(n.target.value)},placeholder:"Mensagem",ref:v}),a.a.createElement(Y,null,"Enviar")))}var nn=function(){var n=function(){var n=Object(r.useState)(U.get()),e=Object(u.a)(n,2),t=e[0],a=e[1],c=Object(I.a)(N),o=Object(u.a)(c,2),i=o[0],s=o[1],l=s.data,f=s.loading,d=s.error,p=(l||{}).createUser;return Object(r.useEffect)((function(){t||i()}),[]),Object(r.useEffect)((function(){p&&(U.save(p),a(p))}),[p]),{user:t,loading:f,error:d}}(),e=n.user,t=n.error;return n.loading?a.a.createElement("h1",null,"Loading..."):t||!e?a.a.createElement("h1",null,"Error"):a.a.createElement(_,{user:e})},en=t(12),tn=t(10);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var rn=t(13),an=t(5),cn=t(16),on=t(37),un=t(2),sn="graphql-subscription-chat.herokuapp.com",ln=new cn.a({uri:"http://".concat(sn,"/graphql")}),fn=new on.a({uri:"ws://".concat(sn),options:{reconnect:!0}}),dn=Object(an.d)((function(n){var e=n.query,t=Object(un.l)(e);return"OperationDefinition"===t.kind&&"subscription"===t.operation}),fn,ln),pn=new en.a({link:dn,cache:new rn.a});o.a.render(a.a.createElement(tn.a,{client:pn},a.a.createElement(nn,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(n){n.unregister()}))}},[[41,1,2]]]);
//# sourceMappingURL=main.8ed220c4.chunk.js.map